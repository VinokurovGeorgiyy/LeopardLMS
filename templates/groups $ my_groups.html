{% extends "groups.html" %}

{% block title %}
    Мои группы | {{ current_user.first_name }} {{ current_user.last_name }}
{% endblock %}

{% set my_groups = current_user.get_groups() %}

{% block main_block %}
    <ul class="nav nav-pills mb-3 nav-justified" id="my-groups-tab" role="tablist">
        <li class="nav-item mr-1" role="presentation">
            <a class="btn btn-outline-dark btn-pill btn-block active" id="all-my-groups-tab" data-toggle="pill" href="#all-my-groups" role="tab" aria-controls="all-my-groups" aria-selected="true">
                Все группы
            </a>
        </li>
        <li class="nav-item ml-1 mr-1" role="presentation">
            <a class="btn btn-outline-dark btn-pill btn-block " id="groups-control-tab" data-toggle="pill" href="#groups-control" role="tab" aria-controls="groups-control" aria-selected="false">
                Контроль
            </a>
        </li>
        <li class="nav-item ml-1" role="presentation">
            <a class="btn btn-outline-dark btn-pill btn-block " id="create-group-tab" data-toggle="pill" href="#create-group" role="tab" aria-controls="create-group" aria-selected="false">
                Создать группу
            </a>
        </li>
    </ul>

    <div class="tab-content" id="my-groups">
        <div class="tab-pane fade show active" id="all-my-groups" role="tabpanel" aria-labelledby="all-my-groups-tab">
            {% if my_groups|length == 0 %}
                <div class="card d-flex justify-content-center align-items-center">
                    Вы не состоите ни в одной группе
                </div>
            {% endif %}
            {% for item in my_groups %}
                <div class="alert card">
                    <div class="d-flex">
                        <div class="mr-2">
                            <img src="{{item.get_profile_photo_url()}}" class="sm-rounded-circle">
                        </div>
                        <div class="w-100">
                            <a class="text-decoration-none text-dark" href="{{url_for('group_profile', group_id=item.id)}}">
                                <h5>{{ item.title }}</h5>
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="tab-pane fade" id="groups-control" role="tabpanel" aria-labelledby="groups-control-tab">

        </div>
        <div class="tab-pane fade" id="create-group" role="tabpanel" aria-labelledby="create-group-tab">
            <div class="card">
                <h4 class="text-center">Создание группы</h4>
                <form action="{{url_for('create_group', dependency='independent')}}" method="post">
                    {{ create_group_form.hidden_tag() }}
                    <div class="form-group">
                        {{create_group_form.title.label(class="col-form-label")}}
                        {{create_group_form.title(class="form-control")}}
                    </div>
                    <div class="form-group">
                        {{create_group_form.description.label(class="col-form-label")}}
                        {{create_group_form.description(class="form-control")}}
                    </div>
                    <div class="form-group">
                        {{create_group_form.group_type.label(class="col-form-label")}}
                        {{create_group_form.group_type(class="form-control")}}
                    </div>
                    <div class="submit-block">
                        {{create_group_form.submit(type="submit", class="btn btn-secondary")}}
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
{% endblock %}
