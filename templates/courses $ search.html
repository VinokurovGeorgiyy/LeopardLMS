{% extends "courses.html" %}

{% block title %}
    Поиск курсов
{% endblock %}

{% block styles %}
    {% include "_style_workspace.html" %}
{% endblock %}

{% block secondary_block %}
    {{ super() }}
    <div class="card mt-3">
        <h6 class="text-center">Расширенный поиск</h6>
        <form id="advanced-search-courses-form" autocomplete=off>
            {{ advanced_search_form.hidden_tag() }}
            <div class="form-group">
                {{advanced_search_form.title(class="form-control", placeholder="Название")}}
            </div>
            <div class="form-group">
                {{advanced_search_form.course_id(class="form-control", placeholder="ID курса")}}
            </div>
            <div class="submit-block">
                {{advanced_search_form.submit(type="submit", class="btn btn-secondary btn-block")}}
            </div>
        </form>
    </div>
{% endblock %}

{% block main_block %}
    <form id="simple-search-courses-form" autocomplete=off class="w-100">
        {{ simple_search_form.hidden_tag() }}
        <div class="d-flex w-100">
            <div class="w-100 mr-2">
                {{simple_search_form.request(class="form-control border border-dark", placeholder="Введите запрос")}}
            </div>
            <div>{{simple_search_form.submit(type="submit", class="btn btn-dark my-2 my-sm-0")}}</div>
        </div>
    </form>
    <div class="mt-2" id="search-result"></div>
{% endblock %}

{% block scripts %}
    {% include "_script_workspace.html" %}
    {% include "_script_ui_card.html" %}
    {% include "_script_ui_option.html" %}
    {% include "_script_utils_requests.html" %}
    {% include "_script_utils_units.html" %}
    {% include "_script_utils_units_course.html" %}
    <script>
        const LABELS = {"NO_RESULT": "По Вашему запросу ничего не найдено",
                        "REQUEST_ERR": "Ошибка при отправке запроса"};
    </script>
    <script>
        $( document ).ready(function () {
            document.querySelector('#simple-search-courses-form').addEventListener('submit', function (e) {
                e.preventDefault();
                searchCourse('simple', 'search-result', LABELS);
            });
            document.querySelector('#advanced-search-courses-form').addEventListener('submit', function (e) {
                e.preventDefault();
                searchCourse('advanced', 'search-result', LABELS);
            });
        });
    </script>
{% endblock %}